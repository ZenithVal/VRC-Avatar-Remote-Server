(function(){"use strict";var e={26753:function(e,a,t){var r=t(49242),l=t(73396);function n(e,a,t,r,n,o){const u=(0,l.up)("Login"),d=(0,l.up)("AdminComponent"),s=(0,l.up)("n-message-provider");return(0,l.wg)(),(0,l.iD)("main",null,[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[e.loggedIn?((0,l.wg)(),(0,l.j4)(d,{key:1})):((0,l.wg)(),(0,l.j4)(u,{key:0,onAttemptLogin:a[0]||(a[0]=a=>e.performLogin("admin",a)),errorMessage:e.loginError},null,8,["errorMessage"]))])),_:1})])}var o=t(56265),u=t.n(o),d={data(){return{loggedIn:!1,notFound:!1,loginError:null}},methods:{async checkLogin(e){try{const a=await u().get(`/api/login/${e}`);this.loggedIn=a.data.loggedIn}catch(a){404==a.response.status&&(this.notFound=!0)}},async performLogin(e,a){this.loginError=null;try{const t=await u().post(`/api/login/${e}`,{password:a});this.loggedIn=this.loggedIn||t.data.success,t.data.success||(this.loginError="Login failed (Wrong password)")}catch(t){console.log(t.response)}},getPasswordParam(){const e=new URLSearchParams(window.location.search);return e.get("password")}}},s=t(87139);const i=e=>((0,l.dD)("data-v-902ad498"),e=e(),(0,l.Cn)(),e),c={class:"basic-box login-box"},p=i((()=>(0,l._)("h1",null,"Login",-1))),m={key:0,class:"error"},h=i((()=>(0,l._)("button",{class:"button green small login-button"},"Login",-1)));function w(e,a,t,n,o,u){return(0,l.wg)(),(0,l.iD)("div",c,[p,(0,l._)("form",{onSubmit:a[1]||(a[1]=(0,r.iM)((a=>e.$emit("attempt-login",o.password)),["prevent"]))},[(0,l.wy)((0,l._)("input",{type:"password","onUpdate:modelValue":a[0]||(a[0]=e=>o.password=e),class:"password-input",placeholder:"Password"},null,512),[[r.nr,o.password]]),null!=t.errorMessage?((0,l.wg)(),(0,l.iD)("div",m,(0,s.zw)(t.errorMessage),1)):(0,l.kq)("",!0),h],32)])}var v={name:"LoginComponent",props:["errorMessage"],data(){return{password:""}}},f=t(40089);const g=(0,f.Z)(v,[["render",w],["__scopeId","data-v-902ad498"]]);var b=g;const y=(0,l.Uk)("VRC Remote Admin"),k=(0,l.Uk)("Create board"),_=(0,l.Uk)("Upload Icon"),C=(0,l._)("div",{class:"spacer"},null,-1),W=(0,l.Uk)("You can open this board under this url: "),P=(0,l.Uk)("Rename board"),A=(0,l.Uk)("Set password"),B=(0,l.Uk)("Disable password"),U=(0,l.Uk)("Drop an avatar OSC JSON file to add it to the board or to update its parameters. You can find these JSON files in a subdirectory of this path (click to select and copy-paste into Windows Explorer):"),D={key:0},S=(0,l._)("b",null,"Error while adding avatar",-1),j=(0,l.Uk)(" Found avatar "),T=(0,l.Uk)(" with "),O=(0,l.Uk)(" input parameters. "),V=(0,l.Uk)("Add avatar"),I=(0,l._)("div",{class:"spacer"},null,-1),$=(0,l.Uk)("Add parameter control"),z=(0,l.Uk)(" The button will always toggle between the "),L=(0,l._)("i",null,"current",-1),x=(0,l.Uk)(" value and the "),F=(0,l._)("i",null,"set value",-1),q=(0,l.Uk)(", but if the server has not received a value for this parameter yet, it needs a default value to reset it to. You should set this to the default value configured for the parameter in Unity "),E=(0,l.Uk)(" The toggle will always toggle between the "),M=(0,l._)("i",null,"default",-1),R=(0,l.Uk)(" value and the "),Z=(0,l._)("i",null,"set value",-1),N=(0,l.Uk)(". If the value is not set to the "),Y=(0,l._)("i",null,"set value",-1),H=(0,l.Uk)(" it will display untoggled and clicking on it will set the value again. You should set this to the default value configured for the parameter in Unity "),J=(0,l.Uk)("Add "),K=(0,l.Uk)("Save"),G=(0,l.Uk)("Delete"),Q=(0,l._)("div",{class:"spacer"},null,-1);function X(e,a,t,r,n,o){const u=(0,l.up)("n-h1"),d=(0,l.up)("n-button"),i=(0,l.up)("n-card"),c=(0,l.up)("n-collapse-item"),p=(0,l.up)("n-image"),m=(0,l.up)("IconTrash"),h=(0,l.up)("n-icon"),w=(0,l.up)("n-space"),v=(0,l.up)("n-gi"),f=(0,l.up)("n-grid"),g=(0,l.up)("n-divider"),b=(0,l.up)("n-upload"),X=(0,l.up)("n-collapse"),ee=(0,l.up)("n-select"),ae=(0,l.up)("n-a"),te=(0,l.up)("n-text"),re=(0,l.up)("n-input"),le=(0,l.up)("Dropzone"),ne=(0,l.up)("n-h3"),oe=(0,l.up)("n-form-item"),ue=(0,l.up)("n-input-number"),de=(0,l.up)("n-checkbox"),se=(0,l.up)("n-collapse-transition"),ie=(0,l.up)("n-form"),ce=(0,l.up)("IconPlus"),pe=(0,l.up)("IconImage"),me=(0,l.up)("n-empty"),he=(0,l.up)("n-config-provider");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(he,{theme:n.darkTheme},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[y])),_:1}),(0,l.Wm)(X,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{title:"Add board"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{type:"primary",onClick:o.addBoard},{default:(0,l.w5)((()=>[k])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,l.Wm)(c,{title:"Icons"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{cols:8},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.icons,(e=>((0,l.wg)(),(0,l.j4)(v,{key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{vertical:!0,align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{width:"100",height:"100",src:"/i/"+e.id},null,8,["src"]),(0,l.Wm)(d,{secondary:"",round:"",type:"error",onClick:a=>o.deleteIcon(e.id)},{icon:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,l.Wm)(g),(0,l.Wm)(b,{name:"icon",action:"/api/admin/upload-icon","show-file-list":!1,"on-finish":e=>o.updateIcons()},{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[_])),_:1})])),_:1},8,["on-finish"])])),_:1})])),_:1})])),_:1}),(0,l.Wm)(g),(0,l.Wm)(ee,{"on-update:value":o.changeBoard,options:o.boardSelectOptions,placeholder:"Select board"},null,8,["on-update:value","options"]),C,null!==n.currentBoard?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Wm)(te,null,{default:(0,l.w5)((()=>[W,(0,l.Wm)(ae,{href:o.boardUrl,target:"_blank"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(o.boardUrl),1)])),_:1},8,["href"])])),_:1}),(0,l.Wm)(g),(0,l.Wm)(X,{style:{"margin-bottom":"20px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{title:"Rename board"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{vertical:"",size:"large"},{default:(0,l.w5)((()=>[(0,l.Wm)(re,{value:n.currentBoardData.name,"onUpdate:value":a[0]||(a[0]=e=>n.currentBoardData.name=e),placeholder:"Board name"},null,8,["value"]),(0,l.Wm)(w,{justify:"end"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{disabled:n.boards[n.currentBoard].name==n.currentBoardData.name,onClick:o.renameBoard},{default:(0,l.w5)((()=>[P])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(c,{title:"Board password"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{vertical:"",size:"large"},{default:(0,l.w5)((()=>[(0,l.Wm)(re,{value:n.currentBoardData.newPassword,"onUpdate:value":a[1]||(a[1]=e=>n.currentBoardData.newPassword=e),placeholder:"Board password"},null,8,["value"]),(0,l.Wm)(te,{type:n.boards[n.currentBoard].password?"success":"info"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(n.boards[n.currentBoard].password?"Password is currently set":"Password is currently not set"),1)])),_:1},8,["type"]),(0,l.Wm)(w,{justify:"end"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{disabled:0==n.currentBoardData.newPassword.length,onClick:a[2]||(a[2]=e=>o.setBoardPassword(n.currentBoardData.newPassword))},{default:(0,l.w5)((()=>[A])),_:1},8,["disabled"]),(0,l.Wm)(d,{type:"warning",disabled:!n.boards[n.currentBoard].password,onClick:a[3]||(a[3]=e=>o.setBoardPassword(null))},{default:(0,l.w5)((()=>[B])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{vertical:"",size:"large"},{default:(0,l.w5)((()=>[(0,l.Wm)(te,null,{default:(0,l.w5)((()=>[U])),_:1}),(0,l.Wm)(re,{readonly:"",size:"small",value:"%HOMEPATH%\\AppData\\LocalLow\\VRChat\\VRChat\\OSC",ref:"oscPathInput",onClick:a[4]||(a[4]=a=>e.$refs.oscPathInput.select())},null,512),(0,l.Wm)(le,{onFile:o.openAvatarFile},null,8,["onFile"]),null!==n.droppedAvatar?((0,l.wg)(),(0,l.iD)("div",D,[null!==n.droppedAvatar.error?((0,l.wg)(),(0,l.j4)(te,{key:0,type:"error"},{default:(0,l.w5)((()=>[S,(0,l.Uk)(": "+(0,s.zw)(n.droppedAvatar.error),1)])),_:1})):null!==o.processedAvatarData?((0,l.wg)(),(0,l.j4)(te,{key:1,type:"info"},{default:(0,l.w5)((()=>[j,(0,l._)("b",null,(0,s.zw)(o.processedAvatarData.name),1),T,(0,l._)("b",null,(0,s.zw)(o.processedAvatarData.parameters.length),1),O])),_:1})):(0,l.kq)("",!0)])):(0,l.kq)("",!0),o.canAddAvatar?((0,l.wg)(),(0,l.j4)(d,{key:1,type:"primary",onClick:o.addAvatar},{default:(0,l.w5)((()=>[V])),_:1},8,["onClick"])):(0,l.kq)("",!0)])),_:1})])),_:1}),(0,l.Wm)(g),o.avatarSelectOptions.length>0?((0,l.wg)(),(0,l.j4)(ee,{key:0,"on-update:value":o.changeAvatar,value:n.currentAvatar,options:o.avatarSelectOptions,placeholder:"Select avatar"},null,8,["on-update:value","value","options"])):(0,l.kq)("",!0),null!==n.currentAvatar?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[I,null!==o.processedAvatarData&&n.currentAvatar==o.processedAvatarData.id?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ne,null,{default:(0,l.w5)((()=>[$])),_:1}),(0,l.Wm)(ie,null,{default:(0,l.w5)((()=>[(0,l.Wm)(oe,{label:"Label"},{default:(0,l.w5)((()=>[(0,l.Wm)(re,{value:n.currentParameterControl.label,"onUpdate:value":a[5]||(a[5]=e=>n.currentParameterControl.label=e),placeholder:"Name of the control"},null,8,["value"])])),_:1}),(0,l.Wm)(oe,{label:"Parameter"},{default:(0,l.w5)((()=>[(0,l.Wm)(ee,{value:n.currentParameterControl.selectedParameter,"onUpdate:value":a[6]||(a[6]=e=>n.currentParameterControl.selectedParameter=e),placeholder:"Select parameter",options:o.newControlSelectOptions},null,8,["value","options"])])),_:1}),(0,l.Wm)(oe,{label:"Control type"},{default:(0,l.w5)((()=>[(0,l.Wm)(ee,{value:n.currentParameterControl.controlType,"onUpdate:value":a[7]||(a[7]=e=>n.currentParameterControl.controlType=e),placeholder:"Select control type",options:o.newControlTypeOptions,disabled:null===o.newControlSelectedParameter},null,8,["value","options","disabled"])])),_:1}),(0,l.Wm)(se,{show:"toggle"==n.currentParameterControl.controlType||"button"==n.currentParameterControl.controlType},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{cols:2,"y-gap":10},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{span:2},{default:(0,l.w5)((()=>["button"==n.currentParameterControl.controlType?((0,l.wg)(),(0,l.j4)(te,{key:0},{default:(0,l.w5)((()=>[z,L,x,F,q])),_:1})):(0,l.kq)("",!0),"toggle"==n.currentParameterControl.controlType?((0,l.wg)(),(0,l.j4)(te,{key:1},{default:(0,l.w5)((()=>[E,M,R,Z,N,Y,H])),_:1})):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(oe,{label:"Default value"},{default:(0,l.w5)((()=>["Float"==o.newControlSelectedParameter.type||"Int"==o.newControlSelectedParameter.type?((0,l.wg)(),(0,l.j4)(ue,{key:0,value:n.currentParameterControl.defaultValue,"onUpdate:value":a[8]||(a[8]=e=>n.currentParameterControl.defaultValue=e),size:"small"},null,8,["value"])):((0,l.wg)(),(0,l.j4)(de,{key:1,checked:n.currentParameterControl.defaultValue,"onUpdate:checked":a[9]||(a[9]=e=>n.currentParameterControl.defaultValue=e)},null,8,["checked"]))])),_:1})])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(oe,{label:"Set value"},{default:(0,l.w5)((()=>["Float"==o.newControlSelectedParameter.type||"Int"==o.newControlSelectedParameter.type?((0,l.wg)(),(0,l.j4)(ue,{key:0,value:n.currentParameterControl.setValue,"onUpdate:value":a[10]||(a[10]=e=>n.currentParameterControl.setValue=e),size:"small"},null,8,["value"])):((0,l.wg)(),(0,l.j4)(de,{key:1,checked:n.currentParameterControl.setValue,"onUpdate:checked":a[11]||(a[11]=e=>n.currentParameterControl.setValue=e)},null,8,["checked"]))])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),(0,l.Wm)(d,{type:"primary",disabled:!o.canAddParameterControl,onClick:o.addParameterControl},{icon:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ce)])),_:1})])),default:(0,l.w5)((()=>[J])),_:1},8,["disabled","onClick"])])),_:1}),(0,l.Wm)(g)],64)):(0,l.kq)("",!0),null!==o.currentAvatarData?((0,l.wg)(),(0,l.j4)(w,{key:1,vertical:"",size:"large"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.currentAvatarData.controls,(e=>((0,l.wg)(),(0,l.j4)(i,{key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(ie,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{cols:4,"x-gap":"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{vertical:!0,align:"stretch"},{default:(0,l.w5)((()=>[null!==e.icon?((0,l.wg)(),(0,l.j4)(w,{key:0,justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{width:"100",height:"100",src:"/i/"+e.icon,"preview-disabled":!0},null,8,["src"])])),_:2},1024)):((0,l.wg)(),(0,l.j4)(me,{key:1,description:"No icon set",size:"medium"},{icon:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(pe)])),_:1})])),_:1})),(0,l.Wm)(ee,{options:o.iconSelectOptions,"render-tag":o.renderIconSelectTag,"render-label":o.renderIconSelectOption,value:e.icon,"onUpdate:value":a=>e.icon=a},null,8,["options","render-tag","render-label","value","onUpdate:value"])])),_:2},1024)])),_:2},1024),(0,l.Wm)(v,{span:3},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{"x-gap":"12",cols:3},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(oe,{label:"Control type"},{default:(0,l.w5)((()=>[(0,l.Wm)(re,{size:"small",round:"",value:e.controlType,readonly:"",disabled:""},null,8,["value"])])),_:2},1024)])),_:2},1024),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(oe,{label:"Data type"},{default:(0,l.w5)((()=>[(0,l.Wm)(re,{size:"small",round:"",value:e.dataType,readonly:"",disabled:""},null,8,["value"])])),_:2},1024)])),_:2},1024),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(oe,{label:"Parameter name"},{default:(0,l.w5)((()=>[(0,l.Wm)(re,{size:"small",round:"",value:e.name,readonly:"",disabled:""},null,8,["value"])])),_:2},1024)])),_:2},1024),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>["range"!=e.controlType?((0,l.wg)(),(0,l.j4)(oe,{key:0,label:"Default value"},{default:(0,l.w5)((()=>["float"==e.dataType||"int"==e.dataType?((0,l.wg)(),(0,l.j4)(ue,{key:0,value:e.defaultValue,"onUpdate:value":a=>e.defaultValue=a,size:"small",round:""},null,8,["value","onUpdate:value"])):((0,l.wg)(),(0,l.j4)(de,{key:1,checked:e.defaultValue,"onUpdate:checked":a=>e.defaultValue=a},null,8,["checked","onUpdate:checked"]))])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1024),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>["range"!=e.controlType?((0,l.wg)(),(0,l.j4)(oe,{key:0,label:"Set value"},{default:(0,l.w5)((()=>["float"==e.dataType||"int"==e.dataType?((0,l.wg)(),(0,l.j4)(ue,{key:0,value:e.setValue,"onUpdate:value":a=>e.setValue=a,size:"small",round:""},null,8,["value","onUpdate:value"])):((0,l.wg)(),(0,l.j4)(de,{key:1,checked:e.setValue,"onUpdate:checked":a=>e.setValue=a},null,8,["checked","onUpdate:checked"]))])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1024),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(oe,{label:"Label"},{default:(0,l.w5)((()=>[(0,l.Wm)(re,{size:"small",value:e.label,"onUpdate:value":a=>e.label=a},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,l.Wm)(w,{justify:"end"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{type:"primary",loading:n.controlsUpdateLoading.has(e.id),onClick:a=>o.updateParameterControl(e)},{default:(0,l.w5)((()=>[K])),_:2},1032,["loading","onClick"]),(0,l.Wm)(d,{type:"error"},{default:(0,l.w5)((()=>[G])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(0,l.kq)("",!0)],64)):(0,l.kq)("",!0),Q],64)):(0,l.kq)("",!0)])),_:1},8,["theme"])])}var ee=t(91260),ae=t(79652),te=t(60212),re=t(37206),le=t(88535),ne=t(53625);function oe(e,a,t,r,n,o){const u=(0,l.up)("n-avatar"),d=(0,l.up)("n-text"),i=(0,l.up)("n-space");return(0,l.wg)(),(0,l.j4)(i,{align:"center",wrap:!1},{default:(0,l.w5)((()=>[null!==t.value?((0,l.wg)(),(0,l.j4)(u,{key:0,size:"medium",src:"/i/"+t.value},null,8,["src"])):(0,l.kq)("",!0),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(t.label),1)])),_:1})])),_:1})}var ue={props:["value","label"]};const de=(0,f.Z)(ue,[["render",oe]]);var se=de;const ie={class:"title"};function ce(e,a,t,n,o,u){return(0,l.wg)(),(0,l.iD)("div",{class:"dropzone",onDrop:a[0]||(a[0]=(0,r.iM)(((...e)=>u.handleDrop&&u.handleDrop(...e)),["prevent"])),onDragover:a[1]||(a[1]=(0,r.iM)((()=>{}),["prevent"]))},[(0,l._)("div",ie,(0,s.zw)(o.droppedFilename),1)],32)}var pe={name:"DropzoneComponent",data(){return{droppedFilename:"Drop a file here"}},methods:{handleDrop(e){const a=e.dataTransfer.files;a.length>0&&(this.droppedFilename=a[0].name,this.$emit("file",a[0]))}}};const me=(0,f.Z)(pe,[["render",ce]]);var he=me,we={components:{Dropzone:he,IconPlus:re.Z,IconTrash:le.Z,IconImage:ne.Z},expose:["updateBoards"],setup(){window.$message=(0,ee.U)()},data(){return{darkTheme:ae.$,newBoardName:"",icons:[],boards:null,currentBoard:null,currentBoardData:{},currentAvatar:null,droppedAvatar:null,controlsUpdateLoading:new Set,currentParameterControl:{label:"",selectedParameter:null,controlType:null,defaultValue:null,setValue:null}}},watch:{processedAvatarData(){null!==this.processedAvatarData&&this.processedAvatarData.id in this.currentBoardData.avatars&&this.changeAvatar(this.processedAvatarData.id)},newControlSelectedParameter(){this.currentParameterControl.controlType=null,this.currentParameterControl.defaultValue=null,this.currentParameterControl.setValue=null},"currentParameterControl.controlType":function(){this.currentParameterControl.defaultValue=null,this.currentParameterControl.setValue=null}},computed:{boardSelectOptions(){return null==this.boards?[]:Object.entries(this.boards).map((e=>({label:e[1].name,value:e[0]})))},avatarSelectOptions(){return null==this.boards||null==this.currentBoard?[]:Object.entries(this.boards[this.currentBoard].avatars).map((e=>({label:e[1].name,value:e[0]})))},canAddAvatar(){return null!==this.droppedAvatar&&null!==this.droppedAvatar.data&&null!==this.boards&&null!==this.currentBoard&&!(this.droppedAvatar.data.id in this.boards[this.currentBoard].avatars)},canAddParameterControl(){return null!==this.processedAvatarData&&null!==this.newControlSelectedParameter&&""!==this.currentParameterControl.label&&("button"===this.currentParameterControl.controlType&&null!==this.currentParameterControl.setValue&&null!==this.currentParameterControl.defaultValue||"toggle"===this.currentParameterControl.controlType&&null!==this.currentParameterControl.setValue&&null!==this.currentParameterControl.defaultValue||"range"===this.currentParameterControl.controlType)},processedAvatarData(){return null==this.droppedAvatar||null==this.droppedAvatar.data?null:{name:this.droppedAvatar.data.name,id:this.droppedAvatar.data.id,parameters:this.droppedAvatar.data.parameters.filter((e=>"input"in e)).map((e=>({name:e.name,type:e.input.type})))}},newControlSelectOptions(){return null===this.processedAvatarData?[]:this.processedAvatarData.parameters.map(((e,a)=>({label:`${e.name} (${e.type})`,value:a})))},newControlSelectedParameter(){return null===this.currentParameterControl.selectedParameter?null:this.processedAvatarData.parameters[this.currentParameterControl.selectedParameter]},newControlTypeOptions(){if(null===this.newControlSelectedParameter)return[];switch(this.newControlSelectedParameter.type){case"Int":case"Bool":return[{label:"Button",value:"button"},{label:"Toggle",value:"toggle"}];case"Float":return[{label:"Button",value:"button"},{label:"Toggle",value:"toggle"},{label:"Range (Rotary)",value:"range"}];default:return[]}},boardUrl(){return null==this.boards||null==this.currentBoard?"":`${window.location.origin}/b/${this.currentBoard}`},currentAvatarData(){return null===this.currentBoardData||null==this.currentAvatar?null:this.currentBoardData.avatars[this.currentAvatar]},iconSelectOptions(){return[{value:null,label:"No icon"}].concat(this.icons.map((e=>({value:e.id,label:e.id}))))}},methods:{async updateBoards(){const e=await u().get("/api/admin/boards");this.boards=e.data.boards,null!==this.currentBoard&&(this.currentBoardData=Object.assign({newPassword:""},this.boards[this.currentBoard]))},async updateIcons(){const e=await u().get("/api/admin/icons");this.icons=e.data.icons},changeBoard(e){this.currentBoard=e,this.currentBoardData=Object.assign({newPassword:""},this.boards[e]),this.currentAvatar=null},changeAvatar(e){this.currentAvatar=e},openAvatarFile(e){if(this.droppedAvatar={error:null,data:null},this.currentParameterControl={label:"",selectedParameter:null,controlType:null,defaultValue:null,setValue:null},"application/json"!=e.type)return void(this.droppedAvatar.error="The dropped file is not a JSON file");const a=new FileReader;a.onload=e=>{try{this.droppedAvatar.data=JSON.parse(e.target.result)}catch(a){this.droppedAvatar.error="Could not parse JSON"}},a.readAsText(e)},addAvatar(){u().post(`/api/admin/b/${this.currentBoard}/add-avatar`,{avatar:{id:this.droppedAvatar.data.id,name:this.droppedAvatar.data.name}}).then((e=>(window.$message.success("Successfully added avatar"),this.updateBoards()))).catch((e=>{window.$message.error("Error while adding avatar")}))},addBoard(){u().post("/api/admin/create-board").then((e=>(window.$message.success(`Successfully created board ${e.data.board.name}`),this.updateBoards()))).catch((e=>{window.$message.error("Error while creating board")}))},addParameterControl(){u().post(`/api/admin/b/${this.currentBoard}/a/${this.currentAvatar}/create-parameter`,{parameter:{name:this.newControlSelectedParameter.name,dataType:this.newControlSelectedParameter.type.toLowerCase(),controlType:this.currentParameterControl.controlType,setValue:this.currentParameterControl.setValue,defaultValue:this.currentParameterControl.defaultValue,label:this.currentParameterControl.label}}).then((e=>this.updateBoards())).catch((e=>{window.$message.error("Error while adding parameter:")}))},renameBoard(){u().put(`/api/admin/b/${this.currentBoard}/name`,{name:this.currentBoardData.name}).then((e=>this.updateBoards())).catch((e=>{}))},setBoardPassword(e){u().put(`/api/admin/b/${this.currentBoard}/password`,{password:e}).then((e=>this.updateBoards())).catch((e=>{}))},updateParameterControl(e){console.log(Object.assign({},e)),this.controlsUpdateLoading.add(e.id),u().put(`/api/admin/b/${this.currentBoard}/a/${this.currentAvatar}/p/${e.id}`,{parameter:e}).then((e=>this.updateBoards())).catch((e=>{window.$message.error("Error while updating parameter")})).finally((()=>{this.controlsUpdateLoading.delete(e.id)}))},deleteParameterControl(e){u()["delete"](`/api/admin/${this.currentBoard}/a/${this.currentAvatar}/p/${e}`).then((e=>this.updateBoards())).catch((e=>{window.$message.error("Error while deleting parameter")}))},deleteIcon(e){u()["delete"](`/api/admin/icon/${e}`).then((e=>Promise.all([this.updateIcons(),this.updateBoards()]))).catch((e=>{window.$message.error("Error while deleting icon")}))},renderIconSelectOption(e){return(0,l.h)(se,{value:e.value,label:e.label})},renderIconSelectTag(e){return(0,l.h)(te.Z,{},(()=>e.option.label))}},async created(){await this.updateBoards(),await this.updateIcons()}};const ve=(0,f.Z)(we,[["render",X]]);var fe=ve,ge={mixins:[d],components:{Login:b,AdminComponent:fe},async created(){await this.checkLogin("admin")}};const be=(0,f.Z)(ge,[["render",n]]);var ye=be,ke=t(92156);const _e=(0,r.ri)(ye);_e.use(ke.Z),_e.mount("#app")}},a={};function t(r){var l=a[r];if(void 0!==l)return l.exports;var n=a[r]={exports:{}};return e[r](n,n.exports,t),n.exports}t.m=e,function(){var e=[];t.O=function(a,r,l,n){if(!r){var o=1/0;for(i=0;i<e.length;i++){r=e[i][0],l=e[i][1],n=e[i][2];for(var u=!0,d=0;d<r.length;d++)(!1&n||o>=n)&&Object.keys(t.O).every((function(e){return t.O[e](r[d])}))?r.splice(d--,1):(u=!1,n<o&&(o=n));if(u){e.splice(i--,1);var s=l();void 0!==s&&(a=s)}}return a}n=n||0;for(var i=e.length;i>0&&e[i-1][2]>n;i--)e[i]=e[i-1];e[i]=[r,l,n]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.j=328}(),function(){var e={328:0};t.O.j=function(a){return 0===e[a]};var a=function(a,r){var l,n,o=r[0],u=r[1],d=r[2],s=0;if(o.some((function(a){return 0!==e[a]}))){for(l in u)t.o(u,l)&&(t.m[l]=u[l]);if(d)var i=d(t)}for(a&&a(r);s<o.length;s++)n=o[s],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(i)},r=self["webpackChunkclient"]=self["webpackChunkclient"]||[];r.forEach(a.bind(null,0)),r.push=a.bind(null,r.push.bind(r))}();var r=t.O(void 0,[998],(function(){return t(26753)}));r=t.O(r)})();
//# sourceMappingURL=admin.eab0e0a1.js.map