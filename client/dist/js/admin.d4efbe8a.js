(function(){"use strict";var e={35508:function(e,a,t){var r=t(49242),l=t(73396);function n(e,a,t,r,n,o){const u=(0,l.up)("Login"),d=(0,l.up)("AdminComponent"),s=(0,l.up)("n-message-provider");return(0,l.wg)(),(0,l.iD)("main",null,[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[e.loggedIn?((0,l.wg)(),(0,l.j4)(d,{key:1})):((0,l.wg)(),(0,l.j4)(u,{key:0,onAttemptLogin:a[0]||(a[0]=a=>e.performLogin("admin",a)),errorMessage:e.loginError},null,8,["errorMessage"]))])),_:1})])}var o=t(56265),u=t.n(o),d={data(){return{loggedIn:!1,notFound:!1,loginError:null}},methods:{async checkLogin(e){try{const a=await u().get(`/api/login/${e}`);this.loggedIn=a.data.loggedIn}catch(a){404==a.response.status&&(this.notFound=!0)}},async performLogin(e,a){this.loginError=null;try{const t=await u().post(`/api/login/${e}`,{password:a});this.loggedIn=this.loggedIn||t.data.success,t.data.success||(this.loginError="Login failed (Wrong password)")}catch(t){console.log(t.response)}},getPasswordParam(){const e=new URLSearchParams(window.location.search);return e.get("password")}}},s=t(87139);const i=e=>((0,l.dD)("data-v-902ad498"),e=e(),(0,l.Cn)(),e),c={class:"basic-box login-box"},p=i((()=>(0,l._)("h1",null,"Login",-1))),m={key:0,class:"error"},w=i((()=>(0,l._)("button",{class:"button green small login-button"},"Login",-1)));function h(e,a,t,n,o,u){return(0,l.wg)(),(0,l.iD)("div",c,[p,(0,l._)("form",{onSubmit:a[1]||(a[1]=(0,r.iM)((a=>e.$emit("attempt-login",o.password)),["prevent"]))},[(0,l.wy)((0,l._)("input",{type:"password","onUpdate:modelValue":a[0]||(a[0]=e=>o.password=e),class:"password-input",placeholder:"Password"},null,512),[[r.nr,o.password]]),null!=t.errorMessage?((0,l.wg)(),(0,l.iD)("div",m,(0,s.zw)(t.errorMessage),1)):(0,l.kq)("",!0),w],32)])}var v={name:"LoginComponent",props:["errorMessage"],data(){return{password:""}}},f=t(40089);const g=(0,f.Z)(v,[["render",h],["__scopeId","data-v-902ad498"]]);var b=g;const y=(0,l.Uk)("VRC Remote Admin"),k=(0,l.Uk)("Create board"),_=(0,l.Uk)("Upload Icon"),W=(0,l._)("div",{class:"spacer"},null,-1),C=(0,l.Uk)("You can open this board under this url: "),P=(0,l.Uk)("Delete board"),A=(0,l.Uk)(" Are you sure you want to delete this board? "),B=(0,l.Uk)("Rename board"),D=(0,l.Uk)("Set password"),U=(0,l.Uk)("Disable password"),j=(0,l.Uk)("Drop an avatar OSC JSON file to add it to the board or to update its parameters. You can find these JSON files in a subdirectory of this path (click to select and copy-paste into Windows Explorer):"),S={key:0},O=(0,l._)("b",null,"Error while adding avatar",-1),T=(0,l.Uk)(" Found avatar "),I=(0,l.Uk)(" with "),V=(0,l.Uk)(" input parameters. "),$=(0,l.Uk)("Add avatar"),z=(0,l._)("div",{class:"spacer"},null,-1),L=(0,l.Uk)("Add parameter control"),x=(0,l.Uk)(" The button will always toggle between the "),E=(0,l._)("i",null,"current",-1),q=(0,l.Uk)(" value and the "),M=(0,l._)("i",null,"set value",-1),Z=(0,l.Uk)(", but if the server has not received a value for this parameter yet, it needs a default value to reset it to. You should set this to the default value configured for the parameter in Unity. "),Y=(0,l.Uk)(" The toggle will always toggle between the "),F=(0,l._)("i",null,"default",-1),R=(0,l.Uk)(" value and the "),N=(0,l._)("i",null,"set value",-1),H=(0,l.Uk)(". If the value is not set to the "),J=(0,l._)("i",null,"set value",-1),K=(0,l.Uk)(" it will display untoggled and clicking on it will set the value again. You should set this to the default value configured for the parameter in Unity. "),G=(0,l.Uk)("Add "),Q=(0,l.Uk)("Save"),X=(0,l.Uk)("Delete"),ee=(0,l._)("div",{class:"spacer"},null,-1);function ae(e,a,t,r,n,o){const u=(0,l.up)("n-h1"),d=(0,l.up)("n-button"),i=(0,l.up)("n-card"),c=(0,l.up)("n-collapse-item"),p=(0,l.up)("n-image"),m=(0,l.up)("IconTrash"),w=(0,l.up)("n-icon"),h=(0,l.up)("n-space"),v=(0,l.up)("n-gi"),f=(0,l.up)("n-grid"),g=(0,l.up)("n-divider"),b=(0,l.up)("n-upload"),ae=(0,l.up)("n-collapse"),te=(0,l.up)("n-select"),re=(0,l.up)("n-a"),le=(0,l.up)("n-text"),ne=(0,l.up)("n-input"),oe=(0,l.up)("IconExclamationCircle"),ue=(0,l.up)("n-popconfirm"),de=(0,l.up)("Dropzone"),se=(0,l.up)("n-h3"),ie=(0,l.up)("n-form-item"),ce=(0,l.up)("n-radio-button"),pe=(0,l.up)("n-radio-group"),me=(0,l.up)("n-collapse-transition"),we=(0,l.up)("n-input-number"),he=(0,l.up)("n-checkbox"),ve=(0,l.up)("n-form"),fe=(0,l.up)("IconPlus"),ge=(0,l.up)("IconImage"),be=(0,l.up)("n-empty"),ye=(0,l.up)("n-config-provider");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(ye,{theme:n.darkTheme},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[y])),_:1}),(0,l.Wm)(ae,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{title:"Add board"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{type:"primary",onClick:o.addBoard},{default:(0,l.w5)((()=>[k])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,l.Wm)(c,{title:"Icons"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{cols:8},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.icons,(e=>((0,l.wg)(),(0,l.j4)(v,{key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{vertical:!0,align:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{width:"100",height:"100",src:"/i/"+e.id},null,8,["src"]),(0,l.Wm)(d,{secondary:"",round:"",type:"error",onClick:a=>o.deleteIcon(e.id)},{icon:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,l.Wm)(g),(0,l.Wm)(b,{name:"icon",action:"/api/admin/upload-icon","show-file-list":!1,"on-finish":e=>o.updateIcons()},{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[_])),_:1})])),_:1},8,["on-finish"])])),_:1})])),_:1})])),_:1}),(0,l.Wm)(g),(0,l.Wm)(te,{"on-update:value":o.changeBoard,value:n.currentBoard,options:o.boardSelectOptions,placeholder:"Select board"},null,8,["on-update:value","value","options"]),W,null!==n.currentBoard?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Wm)(le,null,{default:(0,l.w5)((()=>[C,(0,l.Wm)(re,{href:o.boardUrl,target:"_blank"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(o.boardUrl),1)])),_:1},8,["href"])])),_:1}),(0,l.Wm)(g),(0,l.Wm)(ae,{style:{"margin-bottom":"20px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{title:"Rename/Delete board"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{vertical:"",size:"large"},{default:(0,l.w5)((()=>[(0,l.Wm)(ne,{value:n.currentBoardData.name,"onUpdate:value":a[0]||(a[0]=e=>n.currentBoardData.name=e),placeholder:"Board name"},null,8,["value"]),(0,l.Wm)(h,{justify:"space-between"},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,{onPositiveClick:o.deleteBoard},{icon:(0,l.w5)((()=>[(0,l.Wm)(w,{color:"red"},{default:(0,l.w5)((()=>[(0,l.Wm)(oe)])),_:1})])),trigger:(0,l.w5)((()=>[(0,l.Wm)(d,{type:"error"},{default:(0,l.w5)((()=>[P])),_:1})])),default:(0,l.w5)((()=>[A])),_:1},8,["onPositiveClick"]),(0,l.Wm)(d,{disabled:n.boards[n.currentBoard].name==n.currentBoardData.name,onClick:o.renameBoard},{default:(0,l.w5)((()=>[B])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(c,{title:"Board password"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{vertical:"",size:"large"},{default:(0,l.w5)((()=>[(0,l.Wm)(ne,{value:n.currentBoardData.newPassword,"onUpdate:value":a[1]||(a[1]=e=>n.currentBoardData.newPassword=e),placeholder:"Board password"},null,8,["value"]),(0,l.Wm)(le,{type:n.boards[n.currentBoard].password?"success":"info"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(n.boards[n.currentBoard].password?"Password is currently set":"Password is currently not set"),1)])),_:1},8,["type"]),(0,l.Wm)(h,{justify:"end"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{disabled:0==n.currentBoardData.newPassword.length,onClick:a[2]||(a[2]=e=>o.setBoardPassword(n.currentBoardData.newPassword))},{default:(0,l.w5)((()=>[D])),_:1},8,["disabled"]),(0,l.Wm)(d,{type:"warning",disabled:!n.boards[n.currentBoard].password,onClick:a[3]||(a[3]=e=>o.setBoardPassword(null))},{default:(0,l.w5)((()=>[U])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{vertical:"",size:"large"},{default:(0,l.w5)((()=>[(0,l.Wm)(le,null,{default:(0,l.w5)((()=>[j])),_:1}),(0,l.Wm)(ne,{readonly:"",size:"small",value:"%HOMEPATH%\\AppData\\LocalLow\\VRChat\\VRChat\\OSC",ref:"oscPathInput",onClick:a[4]||(a[4]=a=>e.$refs.oscPathInput.select())},null,512),(0,l.Wm)(de,{onAvatar:o.handleDroppedAvatar},null,8,["onAvatar"]),null!==n.droppedAvatar?((0,l.wg)(),(0,l.iD)("div",S,[null!==n.droppedAvatar.error?((0,l.wg)(),(0,l.j4)(le,{key:0,type:"error"},{default:(0,l.w5)((()=>[O,(0,l.Uk)(": "+(0,s.zw)(n.droppedAvatar.error),1)])),_:1})):null!==o.processedAvatarData?((0,l.wg)(),(0,l.j4)(le,{key:1,type:"info"},{default:(0,l.w5)((()=>[T,(0,l._)("b",null,(0,s.zw)(o.processedAvatarData.name),1),I,(0,l._)("b",null,(0,s.zw)(o.processedAvatarData.parameters.length),1),V])),_:1})):(0,l.kq)("",!0)])):(0,l.kq)("",!0),o.canAddAvatar?((0,l.wg)(),(0,l.j4)(d,{key:1,type:"primary",onClick:o.addAvatar},{default:(0,l.w5)((()=>[$])),_:1},8,["onClick"])):(0,l.kq)("",!0)])),_:1})])),_:1}),(0,l.Wm)(g),o.avatarSelectOptions.length>0?((0,l.wg)(),(0,l.j4)(te,{key:0,"on-update:value":o.changeAvatar,value:n.currentAvatar,options:o.avatarSelectOptions,placeholder:"Select avatar"},null,8,["on-update:value","value","options"])):(0,l.kq)("",!0),null!==n.currentAvatar?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[z,null!==o.processedAvatarData&&n.currentAvatar==o.processedAvatarData.id?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(se,null,{default:(0,l.w5)((()=>[L])),_:1}),(0,l.Wm)(ve,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ie,{label:"Label"},{default:(0,l.w5)((()=>[(0,l.Wm)(ne,{value:n.currentParameterControl.label,"onUpdate:value":a[5]||(a[5]=e=>n.currentParameterControl.label=e),placeholder:"Name of the control"},null,8,["value"])])),_:1}),(0,l.Wm)(ie,{label:"Parameter"},{default:(0,l.w5)((()=>[(0,l.Wm)(te,{value:n.currentParameterControl.selectedParameter,"onUpdate:value":a[6]||(a[6]=e=>n.currentParameterControl.selectedParameter=e),placeholder:"Select parameter",options:o.newControlSelectOptions,filterable:""},null,8,["value","options"])])),_:1}),(0,l.Wm)(me,{show:null!==o.newControlSelectedParameter},{default:(0,l.w5)((()=>[(0,l.Wm)(ie,{label:"Control type"},{default:(0,l.w5)((()=>[(0,l.Wm)(pe,{value:n.currentParameterControl.controlType,"onUpdate:value":a[7]||(a[7]=e=>n.currentParameterControl.controlType=e)},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.newControlTypeOptions,(e=>((0,l.wg)(),(0,l.j4)(ce,{key:e.value,value:e.value},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1},8,["show"]),(0,l.Wm)(me,{show:"toggle"==n.currentParameterControl.controlType||"button"==n.currentParameterControl.controlType},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{cols:2,"y-gap":10},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{span:2},{default:(0,l.w5)((()=>["button"==n.currentParameterControl.controlType?((0,l.wg)(),(0,l.j4)(le,{key:0},{default:(0,l.w5)((()=>[x,E,q,M,Z])),_:1})):(0,l.kq)("",!0),"toggle"==n.currentParameterControl.controlType?((0,l.wg)(),(0,l.j4)(le,{key:1},{default:(0,l.w5)((()=>[Y,F,R,N,H,J,K])),_:1})):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ie,{label:"Default value"},{default:(0,l.w5)((()=>["Float"==o.newControlSelectedParameter.type||"Int"==o.newControlSelectedParameter.type?((0,l.wg)(),(0,l.j4)(we,{key:0,value:n.currentParameterControl.defaultValue,"onUpdate:value":a[8]||(a[8]=e=>n.currentParameterControl.defaultValue=e),size:"small"},null,8,["value"])):((0,l.wg)(),(0,l.j4)(he,{key:1,checked:n.currentParameterControl.defaultValue,"onUpdate:checked":a[9]||(a[9]=e=>n.currentParameterControl.defaultValue=e)},null,8,["checked"]))])),_:1})])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ie,{label:"Set value"},{default:(0,l.w5)((()=>["Float"==o.newControlSelectedParameter.type||"Int"==o.newControlSelectedParameter.type?((0,l.wg)(),(0,l.j4)(we,{key:0,value:n.currentParameterControl.setValue,"onUpdate:value":a[10]||(a[10]=e=>n.currentParameterControl.setValue=e),size:"small"},null,8,["value"])):((0,l.wg)(),(0,l.j4)(he,{key:1,checked:n.currentParameterControl.setValue,"onUpdate:checked":a[11]||(a[11]=e=>n.currentParameterControl.setValue=e)},null,8,["checked"]))])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),(0,l.Wm)(d,{type:"primary",disabled:!o.canAddParameterControl,onClick:o.addParameterControl},{icon:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(fe)])),_:1})])),default:(0,l.w5)((()=>[G])),_:1},8,["disabled","onClick"])])),_:1}),(0,l.Wm)(g)],64)):(0,l.kq)("",!0),null!==o.currentAvatarData?((0,l.wg)(),(0,l.j4)(h,{key:1,vertical:"",size:"large"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.currentAvatarData.controls,(e=>((0,l.wg)(),(0,l.j4)(i,{key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(ve,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{cols:4,"x-gap":"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{vertical:!0,align:"stretch"},{default:(0,l.w5)((()=>[null!==e.icon?((0,l.wg)(),(0,l.j4)(h,{key:0,justify:"center"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{width:"100",height:"100",src:"/i/"+e.icon,"preview-disabled":!0},null,8,["src"])])),_:2},1024)):((0,l.wg)(),(0,l.j4)(be,{key:1,description:"No icon set",size:"medium"},{icon:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ge)])),_:1})])),_:1})),(0,l.Wm)(te,{options:o.iconSelectOptions,"render-tag":o.renderIconSelectTag,"render-label":o.renderIconSelectOption,value:e.icon,"onUpdate:value":a=>e.icon=a},null,8,["options","render-tag","render-label","value","onUpdate:value"])])),_:2},1024)])),_:2},1024),(0,l.Wm)(v,{span:3},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{"x-gap":"12",cols:3},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ie,{label:"Control type"},{default:(0,l.w5)((()=>[(0,l.Wm)(ne,{size:"small",round:"",value:e.controlType,readonly:"",disabled:""},null,8,["value"])])),_:2},1024)])),_:2},1024),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ie,{label:"Data type"},{default:(0,l.w5)((()=>[(0,l.Wm)(ne,{size:"small",round:"",value:e.dataType,readonly:"",disabled:""},null,8,["value"])])),_:2},1024)])),_:2},1024),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ie,{label:"Parameter name"},{default:(0,l.w5)((()=>[(0,l.Wm)(ne,{size:"small",round:"",value:e.name,readonly:"",disabled:""},null,8,["value"])])),_:2},1024)])),_:2},1024),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>["range"!=e.controlType?((0,l.wg)(),(0,l.j4)(ie,{key:0,label:"Default value"},{default:(0,l.w5)((()=>["float"==e.dataType||"int"==e.dataType?((0,l.wg)(),(0,l.j4)(we,{key:0,value:e.defaultValue,"onUpdate:value":a=>e.defaultValue=a,size:"small",round:""},null,8,["value","onUpdate:value"])):((0,l.wg)(),(0,l.j4)(he,{key:1,checked:e.defaultValue,"onUpdate:checked":a=>e.defaultValue=a},null,8,["checked","onUpdate:checked"]))])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1024),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>["range"!=e.controlType?((0,l.wg)(),(0,l.j4)(ie,{key:0,label:"Set value"},{default:(0,l.w5)((()=>["float"==e.dataType||"int"==e.dataType?((0,l.wg)(),(0,l.j4)(we,{key:0,value:e.setValue,"onUpdate:value":a=>e.setValue=a,size:"small",round:""},null,8,["value","onUpdate:value"])):((0,l.wg)(),(0,l.j4)(he,{key:1,checked:e.setValue,"onUpdate:checked":a=>e.setValue=a},null,8,["checked","onUpdate:checked"]))])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1024),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(ie,{label:"Label"},{default:(0,l.w5)((()=>[(0,l.Wm)(ne,{size:"small",value:e.label,"onUpdate:value":a=>e.label=a},null,8,["value","onUpdate:value"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,l.Wm)(h,{justify:"end"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{type:"primary",loading:n.controlsUpdateLoading.has(e.id),onClick:a=>o.updateParameterControl(e)},{default:(0,l.w5)((()=>[Q])),_:2},1032,["loading","onClick"]),(0,l.Wm)(d,{type:"error"},{default:(0,l.w5)((()=>[X])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(0,l.kq)("",!0)],64)):(0,l.kq)("",!0),ee],64)):(0,l.kq)("",!0)])),_:1},8,["theme"])])}var te=t(91260),re=t(79652),le=t(60212),ne=t(37206),oe=t(88535),ue=t(79622),de=t(53625);function se(e,a,t,r,n,o){const u=(0,l.up)("n-avatar"),d=(0,l.up)("n-text"),i=(0,l.up)("n-space");return(0,l.wg)(),(0,l.j4)(i,{align:"center",wrap:!1},{default:(0,l.w5)((()=>[null!==t.value?((0,l.wg)(),(0,l.j4)(u,{key:0,size:"medium",src:"/i/"+t.value},null,8,["src"])):(0,l.kq)("",!0),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(t.label),1)])),_:1})])),_:1})}var ie={props:["value","label"]};const ce=(0,f.Z)(ie,[["render",se]]);var pe=ce;const me=(0,l.Uk)("You can drop more files as well.");function we(e,a,t,n,o,u){const d=(0,l.up)("IconArrowAltCircleDown"),s=(0,l.up)("n-icon"),i=(0,l.up)("n-empty"),c=(0,l.up)("n-select"),p=(0,l.up)("n-text"),m=(0,l.up)("n-space"),w=(0,l.up)("n-spin");return(0,l.wg)(),(0,l.iD)("div",{class:"dropzone",onDrop:a[0]||(a[0]=(0,r.iM)(((...e)=>u.handleDrop&&u.handleDrop(...e)),["prevent"])),onDragover:a[1]||(a[1]=(0,r.iM)((()=>{}),["prevent"]))},[0===Object.keys(o.foundAvatars).length?((0,l.wg)(),(0,l.j4)(i,{key:0,description:"Drop JSON files here"},{icon:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d)])),_:1})])),_:1})):o.loading?((0,l.wg)(),(0,l.j4)(w,{key:2,size:"large"})):((0,l.wg)(),(0,l.j4)(m,{key:1,vertical:!0},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{options:u.selectOptions,placeholder:"Select an avatar",value:o.selectedAvatar,"on-update:value":u.handleSelect},null,8,["options","value","on-update:value"]),(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[me])),_:1})])),_:1}))],32)}var he=t(143),ve={name:"DropzoneComponent",components:{IconArrowAltCircleDown:he.Z},data(){return{foundAvatars:{},selectedAvatar:null,loading:!1}},computed:{selectOptions(){return Object.values(this.foundAvatars).map((e=>(console.log(e),{label:e.name,value:e.id})))}},methods:{handleSelect(e){this.selectedAvatar=e,this.$emit("avatar",this.foundAvatars[e])},async handleDrop(e){const a=e.dataTransfer.files;this.loading=!0;for(let r of a)try{const e=await this.openAvatarFile(r);null!==e&&(this.foundAvatars[e.id]=e)}catch(t){console.error(t)}1==Object.keys(this.foundAvatars).length&&this.handleSelect(Object.keys(this.foundAvatars)[0]),this.loading=!1},openAvatarFile(e){return new Promise(((a,t)=>{if("application/json"!=e.type)return t("Not a json file");const r=new FileReader;r.onload=e=>{try{return a(JSON.parse(e.target.result))}catch(r){return t(r)}},r.readAsText(e)}))}}};const fe=(0,f.Z)(ve,[["render",we]]);var ge=fe,be={components:{Dropzone:ge,IconPlus:ne.Z,IconTrash:oe.Z,IconExclamationCircle:ue.Z,IconImage:de.Z},expose:["updateBoards"],setup(){window.$message=(0,te.U)()},data(){return{darkTheme:re.$,newBoardName:"",icons:[],boards:null,currentBoard:null,currentBoardData:{},currentAvatar:null,droppedAvatar:null,controlsUpdateLoading:new Set,currentParameterControl:{label:"",selectedParameter:null,controlType:null,defaultValue:null,setValue:null}}},watch:{processedAvatarData(){null!==this.processedAvatarData&&this.processedAvatarData.id in this.currentBoardData.avatars&&this.changeAvatar(this.processedAvatarData.id)},newControlSelectedParameter(){this.currentParameterControl.controlType=null,this.currentParameterControl.defaultValue=null,this.currentParameterControl.setValue=null},"currentParameterControl.controlType":function(){this.currentParameterControl.defaultValue=null,this.currentParameterControl.setValue=null}},computed:{boardSelectOptions(){return null==this.boards?[]:Object.entries(this.boards).map((e=>({label:e[1].name,value:e[0]})))},avatarSelectOptions(){return null==this.boards||null==this.currentBoard?[]:Object.entries(this.boards[this.currentBoard].avatars).map((e=>({label:e[1].name,value:e[0]})))},canAddAvatar(){return null!==this.droppedAvatar&&null!==this.droppedAvatar.data&&null!==this.boards&&null!==this.currentBoard&&!(this.droppedAvatar.data.id in this.boards[this.currentBoard].avatars)},canAddParameterControl(){return null!==this.processedAvatarData&&null!==this.newControlSelectedParameter&&""!==this.currentParameterControl.label&&("button"===this.currentParameterControl.controlType&&null!==this.currentParameterControl.setValue&&null!==this.currentParameterControl.defaultValue||"toggle"===this.currentParameterControl.controlType&&null!==this.currentParameterControl.setValue&&null!==this.currentParameterControl.defaultValue||"range"===this.currentParameterControl.controlType)},processedAvatarData(){return null==this.droppedAvatar||null==this.droppedAvatar.data?null:{name:this.droppedAvatar.data.name,id:this.droppedAvatar.data.id,parameters:this.droppedAvatar.data.parameters.filter((e=>"input"in e)).map((e=>({name:e.name,type:e.input.type})))}},newControlSelectOptions(){return null===this.processedAvatarData?[]:this.processedAvatarData.parameters.map(((e,a)=>({label:`${e.name} (${e.type})`,value:a})))},newControlSelectedParameter(){return null===this.currentParameterControl.selectedParameter?null:this.processedAvatarData.parameters[this.currentParameterControl.selectedParameter]},newControlTypeOptions(){if(null===this.newControlSelectedParameter)return[];switch(this.newControlSelectedParameter.type){case"Int":case"Bool":return[{label:"Button",value:"button"},{label:"Toggle",value:"toggle"}];case"Float":return[{label:"Button",value:"button"},{label:"Toggle",value:"toggle"},{label:"Range (Rotary)",value:"range"}];default:return[]}},boardUrl(){return null==this.boards||null==this.currentBoard?"":`${window.location.origin}/b/${this.currentBoard}`},currentAvatarData(){return null===this.currentBoardData||null==this.currentAvatar?null:this.currentBoardData.avatars[this.currentAvatar]},iconSelectOptions(){return[{value:null,label:"No icon"}].concat(this.icons.map((e=>({value:e.id,label:e.id}))))}},methods:{async updateBoards(){const e=await u().get("/api/admin/boards");this.boards=e.data.boards,null!==this.currentBoard&&(this.currentBoardData=Object.assign({newPassword:""},this.boards[this.currentBoard]))},async updateIcons(){const e=await u().get("/api/admin/icons");this.icons=e.data.icons},changeBoard(e){this.currentBoard=e,null!==e&&(this.currentBoardData=Object.assign({newPassword:""},this.boards[e])),this.currentAvatar=null},changeAvatar(e){this.currentAvatar=e},handleDroppedAvatar(e){this.droppedAvatar={error:null,data:null},this.currentParameterControl={label:"",selectedParameter:null,controlType:null,defaultValue:null,setValue:null},this.droppedAvatar.data=e},addAvatar(){u().post(`/api/admin/b/${this.currentBoard}/add-avatar`,{avatar:{id:this.droppedAvatar.data.id,name:this.droppedAvatar.data.name}}).then((e=>(window.$message.success("Successfully added avatar"),this.updateBoards()))).catch((e=>{window.$message.error("Error while adding avatar")}))},addBoard(){u().post("/api/admin/create-board").then((e=>(window.$message.success(`Successfully created board ${e.data.board.name}`),this.updateBoards()))).catch((e=>{window.$message.error("Error while creating board")}))},addParameterControl(){u().post(`/api/admin/b/${this.currentBoard}/a/${this.currentAvatar}/create-parameter`,{parameter:{name:this.newControlSelectedParameter.name,dataType:this.newControlSelectedParameter.type.toLowerCase(),controlType:this.currentParameterControl.controlType,setValue:this.currentParameterControl.setValue,defaultValue:this.currentParameterControl.defaultValue,label:this.currentParameterControl.label}}).then((e=>this.updateBoards())).catch((e=>{window.$message.error("Error while adding parameter:")}))},renameBoard(){u().put(`/api/admin/b/${this.currentBoard}/name`,{name:this.currentBoardData.name}).then((e=>this.updateBoards())).catch((e=>{}))},deleteBoard(){u()["delete"](`/api/admin/b/${this.currentBoard}`).then((e=>(this.changeBoard(null),this.updateBoards()))).catch((e=>{}))},setBoardPassword(e){u().put(`/api/admin/b/${this.currentBoard}/password`,{password:e}).then((e=>this.updateBoards())).catch((e=>{}))},updateParameterControl(e){console.log(Object.assign({},e)),this.controlsUpdateLoading.add(e.id),u().put(`/api/admin/b/${this.currentBoard}/a/${this.currentAvatar}/p/${e.id}`,{parameter:e}).then((e=>this.updateBoards())).catch((e=>{window.$message.error("Error while updating parameter")})).finally((()=>{this.controlsUpdateLoading.delete(e.id)}))},deleteParameterControl(e){u()["delete"](`/api/admin/${this.currentBoard}/a/${this.currentAvatar}/p/${e}`).then((e=>this.updateBoards())).catch((e=>{window.$message.error("Error while deleting parameter")}))},deleteIcon(e){u()["delete"](`/api/admin/icon/${e}`).then((e=>Promise.all([this.updateIcons(),this.updateBoards()]))).catch((e=>{window.$message.error("Error while deleting icon")}))},renderIconSelectOption(e){return(0,l.h)(pe,{value:e.value,label:e.label})},renderIconSelectTag(e){return(0,l.h)(le.Z,{},(()=>e.option.label))}},async created(){await this.updateBoards(),await this.updateIcons()}};const ye=(0,f.Z)(be,[["render",ae]]);var ke=ye,_e={mixins:[d],components:{Login:b,AdminComponent:ke},async created(){await this.checkLogin("admin")}};const We=(0,f.Z)(_e,[["render",n]]);var Ce=We,Pe=t(92156);const Ae=(0,r.ri)(Ce);Ae.use(Pe.Z),Ae.mount("#app")}},a={};function t(r){var l=a[r];if(void 0!==l)return l.exports;var n=a[r]={exports:{}};return e[r](n,n.exports,t),n.exports}t.m=e,function(){var e=[];t.O=function(a,r,l,n){if(!r){var o=1/0;for(i=0;i<e.length;i++){r=e[i][0],l=e[i][1],n=e[i][2];for(var u=!0,d=0;d<r.length;d++)(!1&n||o>=n)&&Object.keys(t.O).every((function(e){return t.O[e](r[d])}))?r.splice(d--,1):(u=!1,n<o&&(o=n));if(u){e.splice(i--,1);var s=l();void 0!==s&&(a=s)}}return a}n=n||0;for(var i=e.length;i>0&&e[i-1][2]>n;i--)e[i]=e[i-1];e[i]=[r,l,n]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.j=328}(),function(){var e={328:0};t.O.j=function(a){return 0===e[a]};var a=function(a,r){var l,n,o=r[0],u=r[1],d=r[2],s=0;if(o.some((function(a){return 0!==e[a]}))){for(l in u)t.o(u,l)&&(t.m[l]=u[l]);if(d)var i=d(t)}for(a&&a(r);s<o.length;s++)n=o[s],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(i)},r=self["webpackChunkclient"]=self["webpackChunkclient"]||[];r.forEach(a.bind(null,0)),r.push=a.bind(null,r.push.bind(r))}();var r=t.O(void 0,[998],(function(){return t(35508)}));r=t.O(r)})();
//# sourceMappingURL=admin.d4efbe8a.js.map